<!DOCTYPE HTML>
<html lang="ko">

<head>
	<title>스터디 | We Study platform</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="css/main.css">
    <link type="text/css" rel="stylesheet" href="css/common.css">
    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link type="text/css" rel="stylesheet" href="css/mediaqueries.css">
	<link rel="stylesheet" href="node_modules/slidebars/dist/slidebars.css">
	<link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.css">
	<link href="node_modules/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
	
	
	<style>
        .modal {
            text-align: center;
        }

        .modal-dialog {
            text-align: left;
            vertical-align: middle;
        }

        .modal:before {
            display: inline-block;
            vertical-align: middle;
            content: " ";
            height: 10%;
        }
    </style>
</head>

<body>
    
     <!-- header start -->
    <div id="header"> </div>
    <!-- header end -->
    
    <!-- container start -->
	<div canvas="container" class="section" id="container">
		<!--Carousel-->
		<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
		    <ol class="carousel-indicators">
		        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
		        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
		        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
		    </ol>
		    <div class="carousel-inner">
		        <div class="carousel-item active">
		            <img class="d-block w-100" src="img/visualBanner3.jpg" alt="First slide">
		        </div>
		        <div class="carousel-item">
		            <img class="d-block w-100" src="img/main2.jpg" alt="Second slide">
		        </div>
		        <div class="carousel-item">
		            <img class="d-block w-100" src="img/main1.jpg" alt="Third slide">
		        </div>
		    </div>
		    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
		        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		        <span class="sr-only">Previous</span>
		    </a>
		    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
		        <span class="carousel-control-next-icon" aria-hidden="true"></span>
		        <span class="sr-only">Next</span>
		    </a>
		</div>
		<!--Carousel-->
	    
	    <!-- 분류 메뉴 -->
		<div class="mainCategory">
			<ul>
				<li>
				    <a href="search.html?category=it">
				        <span class="img it">it</span>
				        <span class="text">IT</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=national">
				        <span class="img country"></span>
				        <span class="text">국가시험</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=gisa">
				        <span class="img license"></span>
				        <span class="text">기사</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=language">
				        <span class="img language"></span>
				        <span class="text">언어</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=finance">
				        <span class="img dollar"></span>
				        <span class="text">금융</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=job">
				        <span class="img job"></span>
				        <span class="text">취업</span>
				    </a>
				</li>
				<li>
				    <a href="search.html?category=discussion">
				        <span class="img feedback"></span>
				        <span class="text">토론</span>
				    </a>
				</li>
				<li>
				    <a href="search.html">
				        <span class="img etc"></span>
				        <span class="text">기타</span>
				    </a>
				</li>
			</ul>
		</div>
	    <!-- 분류 메뉴 -->
	    
	    <div class="wrap center">
	        <div class="section" style="padding-top: 0; display:none;" id="login-after">
	            <div class="resizeWidth">
                    <p class="titlehead text-center" style="margin: 2rem 0;">내 주변 스터디</p>
                </div>

                <div class="l-wrapper" style="margin: 0 auto">
                    <ul id="lrow" class="l-row">

                    </ul>
                </div>
	
	           <!-- 관심 스터디 -->
	            <div class="center">
                   <p class="titlehead" style="margin:2rem 0;">내 관심 스터디</p>
                   <a href="#" class="right" style="color:#333">더보기</a>
                   <div class="slider">
                       <div class="sliderInner">
                           <div class="left grid3" style="margin-left: 0">
                               <img src="" id="s1img"/>
                               <div class="imgOverInfo">
                                   <span id="s1name"><!-- 강원대학교 자바 웹개발 스터디 --> </span>
                                   <br>
                                   <span id="s1tag"> #Servlet #Spring </span>
                               </div>
                           </div>
                           <div class="left grid3">
                               <img src="" id="s2img"/>
                               <div class="imgOverInfo">
                                   <span id="s2name"><!-- 강원대학교 자바 웹개발 스터디 --> </span>
                                   <br>
                                   <span id="s2tag"> #Servlet #Spring </span>
                               </div>
                           </div>
                           <div class="left grid3">
                               <img src="" id="s3img"/>
                               <div class="imgOverInfo">
                                   <span id="s3name"><!-- 강원대학교 자바 웹개발 스터디 --> </span>
                                   <br>
                                   <span id="s3tag">#Servlet #Spring </span>
                               </div>
                           </div> 
                       </div>

                       <div class="sliderInner">
                           <div class="left grid3" style="margin-left: 0">
                               <img src="" id="s4img"/>
                               <div class="imgOverInfo">
                                   <span id="s4name"><!-- 강원대학교 자바 웹개발 스터디2  --></span>
                                   <br>
                                   <span id="s4tag"> #Servlet #Spring</span>
                               </div>
                           </div>
                           <div class="left grid3">
                               <img src="" id="s5img"/>
                               <div class="imgOverInfo">
                                   <span id="s5name"><!-- 강원대학교 자바 웹개발 스터디2  --></span>
                                   <br>
                                   <span id="s5tag">#Servlet #Spring</span>
                               </div>
                           </div>
                           <div class="left grid3">
                               <img src="" id="s6img"/>
                               <div class="imgOverInfo">
                                   <span id="s6name"><!-- 강원대학교 자바 웹개발 스터디2  --></span>
                                   <br>
                                   <span id="s6tag"> #Servlet #Spring</span>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
	           <!-- 관심 스터디 -->
	        </div>
        </div>
        
        <div class="section" style="padding-top: 0; display:none;" id="login-before">
            <div class="resizeWidth">
                <p class="titlehead text-center" style="margin:2rem 0;">인기 스터디</p>
               
            </div>

            <div class="l-wrapper" style="margin: 0 auto">
                <ul id="interested" class="l-row">
                    
                </ul>
            </div>
         </div>
        
        <!-- 신규 스터디 -->
	    <div class="center del-float" style="overflow:auto">
	        <p class="titlehead" style="margin:2rem 0;">신규 스터디</p>
	        <hr>
	        <div class="del-float">
	            <div class="memberOffer">
	                <div class="titleContent latelyText">
	                    최근에 등록된 스터디를 확인해보세요!
	                    <br>
	                    <div class="btn">
	                        보러 가기
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	    <!-- 신규 스터디 -->
	    
	    
	    <!-- 스터디 후기 -->
	    <div class="wrap center">
	        <div class="center del-float">
	            <p class="titlehead" style="margin:2rem 0;">스터디 후기</p>
	            <a href="review.html" class="right" style="color:#333">더보기</a>
	        </div>
        </div>
	    <div class="study-contents">
	        <div class="l-wrapper">
	            <ul class="l-row reviewBox">
	                
	            </ul>
	        </div>
        </div>
	    <!-- 스터디 후기 -->
	    
	    
	    <!-- footer start -->
	    <footer class="footer">
	        <p>Logo</p>
	
	        <div>
	            <span>서울특별시 강남구 비트캠프 401호</span>
	            <span>Tel080-777-2299</span>
	            <span>개인정보취급관리자 홍길동</span>
	            <span>E-mail : we_study@westudy.com</span>
	        </div>
	        <p>Copyright ⓒ 2018 WeStudy. All Rights Reserved.</p>
	    </footer>
	    <!-- footer end -->
	    
	</div>
	<!-- container end -->
	
	
	<!-- javascript start -->
	
	<script src='node_modules/jquery/dist/jquery.js'></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
	<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
	<script src="js/common.js"></script>
	<script src="js/mainReview.js"></script>
	<script src="slider/jquery.bxslider.min.js"></script>
	<script src="js/mainAttention.js"></script>
    <script src="node_modules/slidebars/dist/slidebars.js"></script>
	<script src="node_modules/sweetalert2/dist/sweetalert2.min.js"></script>
	<script>
	
	var memno = -1;
        $(document).ready(function () {
		    $("#header").load(serverRoot + "/header.html");
        	
        	$.get("json/auth/loginstat", {}, res=> {
                memno = res.no;
                
                if(typeof(res) == "object" ) { // 로그인 후
                    $("#login-after.section").css("display", "block");
                    $("#login-before.section").css("display", "none");
                } else { //로그인 전
                    $("#login-after.section").css("display", "none");
                    $("#login-before.section").css("display", "block");
                }
            })
        
            
            $('.slider').bxSlider({
                auto: true,
                speed: 500,
                mode: 'fade',
                adaptiveHeight: true,
                hideControlOnEnd: true,
                minSlides: 3,
                maxSlides: 3
            });
            nearList();
            interList();
            });

            function nearList(){
                var nearList = $('.l-row');
                
                    $.get("json/auth/loginstat", {}, res=> {
                        no = res.no;
                    }).done(function(data){
                        $.ajax({
                        url : "/FinalProject/json/studyInfo/nearList",
                        method : "POST",
                        data: {"no" : no},
                        dataType:"json",
                        success:function(data){
                            for(var item of data){
                               $("<li class='l-col'>").html(`<div id='mystudy' data-no='${item.no}' class='study' style='background: #fff; border:solid 1px #d2d2d2'>
                                       <a href='groupMain.html?no=${item.no}' style='display: block; width: 100%;'>
                                       <div class='ove'><span class='ove_span'><img style="width:100%; height:100%"src="img/studyImgs/${item.picture}_350x350.jpg" class="as"></span></div></a>
                                       <div class='info_area'><h2 class='infoareah2'>${item.name}</h2>
                                       <div class='tags'><span class='tag_area_name'>${item.county}</span></div></div></div>`).appendTo(lrow);
                              
                               let itemNo = item.no;
                                $.getJSON("json/studyInfo/listTag/" + itemNo, (data2) => {
                                    for (var i of data2) {
                                        $('div[data-no="' + itemNo + '"] div.tags').append($("<span class='hashtags'>" + i.hashtag + "</span>"));
                                    }
                                });
                            }
                        }
                    })
                });
            }     
            
            /* 인기 스터디 */
            $.getJSON("json/studyInfo/listRandom", (data) => {
                    for (var item of data) {
                        console.log(item); 
                         $("<li class='l-col'>").html(`<div id='mystudy' data-no='${item.no}' class='study' style='background: #fff; border:solid 1px #d2d2d2'>
                           <a href='groupMain.html?no=${item.no}' style='display: block; width: 100%;'>
                           <div class='ove'><span class='ove_span'><img src="img/studyImgs/${item.picture}_350x350.jpg" class="as"></span></div></a>
                           <div class='info_area'><h2 class='infoareah2'>${item.name}</h2>
                           <div class='tags'><span class='tag_area_name'>${item.county}</span></div></div></div>`).appendTo(interested);
                    
                       
                        let itemNo = item.no;
                        $.getJSON("json/studyInfo/listTag/" + itemNo, (data2) => {
                            /* console.log(itemNo); */
                            for (var i of data2) {
                                $('div[data-no="' + itemNo + '"] div.tags').append($("<span class='hashtags'>" + i.hashtag + "</span>"));
                            }
                        });
                    }
            });
            
            
            function interList(){
                var interList = $('.interList');
                
                $.get("json/auth/loginstat", {}, res=> {
                     memNo = res.no;
                 }).done(function(data){
                     console.log("memNo : " + memNo);
                     $.getJSON("json/joinedMember/interList", {memNo : memNo}, (data) => {
                        console.log(data);
                        console.log(data[0].study.picture);
                       
                        /* 관심스터디이름 */
                       $('#s1name').text(data[0].study.name);
                       $('#s2name').text(data[1].study.name);
                       $('#s3name').text(data[2].study.name);
                       $('#s4name').text(data[3].study.name);
                       $('#s5name').text(data[4].study.name);
                       $('#s6name').text(data[5].study.name);
                       
                       
                       $('#s1img').attr('src', 'img/studyImgs/' + data[0].study.picture + '_350x350.jpg');
                       $('#s2img').attr('src', 'img/studyImgs/' + data[1].study.picture + '_350x350.jpg');
                       $('#s3img').attr('src', 'img/studyImgs/' + data[2].study.picture + '_350x350.jpg');
                       $('#s4img').attr('src', 'img/studyImgs/' + data[3].study.picture + '_350x350.jpg');
                       $('#s5img').attr('src', 'img/studyImgs/' + data[4].study.picture + '_350x350.jpg');
                       $('#s6img').attr('src', 'img/studyImgs/' + data[5].study.picture + '_350x350.jpg');
                       
                    /*     /* 관심스터디해시태그 
                       $('.s1tag').text(data[0].hashtag);
                       $('.s2tag').text(data[1].hashtag);
                       $('.s3tag').text(data[2].hashtag);
                       $('.s4tag').text(data[3].hashtag);
                       $('.s5tag').text(data[4].hashtag);
                       $('.s6tag').text(data[5].hashtag); */
                        
                    });
             });
             }          


        
    </script>
	<!-- bxslider end -->
	
	<!-- javascript end -->
	
</body>

</html>