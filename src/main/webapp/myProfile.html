<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
    <link href="node_modules/@fortawesome/fontawesome-free/css/all.css" rel="stylesheet">
    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link href="node_modules/slidebars/dist/slidebars.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/common.css">
    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/br_profile.css">
    
    <title>내 정보 관리</title>
    
    <style>
        #fileupload{
            visibility: hidden;
        }
    </style>
    
</head>

<body>
    
    <!-- header start -->
	<div id="header"></div>
	<!-- header end -->
	
    <div id="container" canvas="container">
	
       <div class="container">
           <div class="row">
                <div class="col-sm-2" style="text-align: center">
                    <div class="col-box-list">
                       <div class="class_titl">내정보</div>
                        <hr class="line3">
                        <div class="list-group cls-list">
                            <a href="myProfile.html" class="list-group-item list-group-item-action cls-list-link">
                                내 정보 관리
                            </a>
                            <a href="myInterestsField.html" class="list-group-item list-group-item-action cls-list-link">
                                관심 분야 설정
                            </a>
                            <a href="message.html" class="list-group-item list-group-item-action cls-list-link">
                                메시지
                            </a>
                            <a href="myPasswordChange.html" class="list-group-item list-group-item-action cls-list-link">
                                비밀번호 변경
                            </a>
                            <a href="myProfileDeleteConfirm.html" class="list-group-item list-group-item-action cls-list-link">
                                계정 삭제
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="container-box col">
                    <div class="inner-container-box">
                        <h3>내 정보 관리</h3><hr>
                        <div class="form-group-img">
                            <div id='images-div'>
                                <img id="profileImage" src="holder.js/200x200?text=클릭해서 사진을 추가해주세요.(200x200)">
                            </div>
                            <div class="row">
                                <div class="col-sm-4 offset-sm-4">
                                    <div class="row">
                                      <input class="col-10 form-control-sm form-control-file" id="fileupload" type="file" name="files" data-url="json/member/upload01" multiple>
                                      <div class="col" id="btnArea"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-2 info-title">
                                <ul>
                                    <li>이름</li>
                                    <li>이메일 주소</li>
                                    <li>생년월일</li>
                                    <li>성별</li>
                                </ul>
                            </div>
                            <div class="col-10">
                                <div id="info"></div>
                            </div>
                        </div>
                    </div>
                </div>
           </div>
       </div>
           
           
	    <footer class="footer">
	        <p>Logo</p>
	        <div>
	            <span>서울특별시 강남구 비트캠프 401호</span>
	            <span>Tel080-777-2299</span>
	            <span>개인정보취급관리자 홍길동</span>
	            <span>E-mail : we_study@westudy.com</span>
	        </div>
	        <p>Copyright ⓒ 2018 WeStudy. All Rights Reserved.</p>
	    </footer>
	    
	    
    </div>
    
    
    
    
    <script src='node_modules/jquery/dist/jquery.js'></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
    <script src="node_modules/slidebars/dist/slidebars.js"></script>
    <script src="js/common.js"></script>
    <script>
        $("#header").load(serverRoot+"/header.html");
    </script>
    
    <script src="js/holder.min.js"></script>
    <script>
        Holder.addTheme("dark", {
            background: "#000",
            foreground: "#aaa",
            size: 11,
            font: "Monaco",
            fontweight: "normal"
        });
    </script>
    
    <script>
        var memno = -1;
        $.get("json/auth/loginstat", {}, res=> {
            console.log("[" + res + "]" + ", " + typeof(res));
            console.log(res.no);
            memno = res.no;
        })
        
        setTimeout( function() {
        $.getJSON("json/member/"+memno, (data) => {
            $("<ul>")
                .html("<li>" + data.name + "</li>" + 
                    "<li>" + data.email + "</li>" + 
                    "<li>" + data.birthday + "</li>" + 
                    "<li>" + data.gender + "</li>"
                ).appendTo(info);
        })
        }, 500);
    </script>
    
    <!-- file upload start -->
    <script src="node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
    <script src="node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"></script>
    <script src="node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
    <script>
    "use strict"
    
    $(function() {
        $('#images-div').click(function (e) {
            e.preventDefault(); $('#fileupload').click(); 
        }) 
    });
    
    $('#fileupload').fileupload({
        dataType: 'json',
        add: function (e, data) {
            console.log('add()...');
            data.context = $('<button/>').text('Upload');
            data.submit();// 해당 파일의 서버 전송을 시작한다.
        },
        done: function (e, data) {
          console.log('done()...');
          console.log(data.result);
          var file = data.result;
          $("#profileImage").attr("src", "img/"+file.filename);
          //$("#profileImage").html("<img width='100' src='img/" + file.filename + "'> ");
        },
        submit:function(e, data) {
            data.formData = {
                    memberNo: memno
            }
        }
    })
    </script>
    <!-- file upload end -->
    
</body>
</html>